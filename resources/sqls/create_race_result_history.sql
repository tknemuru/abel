create table if not exists race_result_history (
  race_id integer not null,

  order_of_finish text    not null,
  frame_number       integer not null,
  horse_number       integer not null,
  horse_id           text    not null,
  sex                text    not null,
  age                integer not null,
  basis_weight       real    not null,
  jockey_id          text    not null,
  finishing_time     text    not null,
  length             text    not null,
  speed_figure       integer,
  pass               text    not null,
  last_phase         real,
  odds               real,
  popularity         integer,
  horse_weight       text    not null,
  remark             text,
  stable             text    not null,
  trainer_id         text    not null,
  owner_id           text    not null,
  earning_money      real,

  pre1_race_id            integer,
  pre1_order_of_finish    text,
  pre1_frame_number       integer,
  pre1_horse_number       integer,
  pre1_horse_id           text,
  pre1_sex                text,
  pre1_age                integer,
  pre1_basis_weight       real,
  pre1_jockey_id          text,
  pre1_finishing_time     text,
  pre1_length             text,
  pre1_speed_figure       integer,
  pre1_pass               text,
  pre1_last_phase         real,
  pre1_odds               real,
  pre1_popularity         integer,
  pre1_horse_weight       text,
  pre1_horse_weight_diff  integer,
  pre1_remark             text,
  pre1_stable             text,
  pre1_trainer_id         text,
  pre1_owner_id           text,
  pre1_earning_money      real,

  pre2_race_id            integer,
  pre2_order_of_finish    text,
  pre2_frame_number       integer,
  pre2_horse_number       integer,
  pre2_horse_id           text,
  pre2_sex                text,
  pre2_age                integer,
  pre2_basis_weight       real,
  pre2_jockey_id          text,
  pre2_finishing_time     text,
  pre2_length             text,
  pre2_speed_figure       integer,
  pre2_pass               text,
  pre2_last_phase         real,
  pre2_odds               real,
  pre2_popularity         integer,
  pre2_horse_weight       text,
  pre2_horse_weight_diff  integer,
  pre2_remark             text,
  pre2_stable             text,
  pre2_trainer_id         text,
  pre2_owner_id           text,
  pre2_earning_money      real,

  pre3_race_id            integer,
  pre3_order_of_finish    text,
  pre3_frame_number       integer,
  pre3_horse_number       integer,
  pre3_horse_id           text,
  pre3_sex                text,
  pre3_age                integer,
  pre3_basis_weight       real,
  pre3_jockey_id          text,
  pre3_finishing_time     text,
  pre3_length             text,
  pre3_speed_figure       integer,
  pre3_pass               text,
  pre3_last_phase         real,
  pre3_odds               real,
  pre3_popularity         integer,
  pre3_horse_weight       text,
  pre3_horse_weight_diff  integer,
  pre3_remark             text,
  pre3_stable             text,
  pre3_trainer_id         text,
  pre3_owner_id           text,
  pre3_earning_money      real,

  pre4_race_id            integer,
  pre4_order_of_finish    text,
  pre4_frame_number       integer,
  pre4_horse_number       integer,
  pre4_horse_id           text,
  pre4_sex                text,
  pre4_age                integer,
  pre4_basis_weight       real,
  pre4_jockey_id          text,
  pre4_finishing_time     text,
  pre4_length             text,
  pre4_speed_figure       integer,
  pre4_pass               text,
  pre4_last_phase         real,
  pre4_odds               real,
  pre4_popularity         integer,
  pre4_horse_weight       text,
  pre4_horse_weight_diff  integer,
  pre4_remark             text,
  pre4_stable             text,
  pre4_trainer_id         text,
  pre4_owner_id           text,
  pre4_earning_money      real,

  -- custom column
  horse_weight_diff  integer,
  pre1_horse_weight_diff  integer,
  pre2_horse_weight_diff  integer,
  pre3_horse_weight_diff  integer,
  pre4_horse_weight_diff  integer,
  primary key (race_id, horse_number),
  foreign key (race_id) references race_info (id)
);
